[gd_scene load_steps=19 format=3 uid="uid://7s2njiex250w"]

[ext_resource type="Script" uid="uid://ca50k4btmq8wk" path="res://scenes/player.gd" id="1_3vyb7"]
[ext_resource type="Texture2D" uid="uid://bxyfo2i3mydcd" path="res://art/player-flying_0001.png" id="3_dqkch"]
[ext_resource type="Script" uid="uid://bs63lc3465t34" path="res://scenes/wrapping_controller.gd" id="3_wrapping"]
[ext_resource type="Texture2D" uid="uid://2dbo4cu0jjb4" path="res://art/player-flying_0002.png" id="4_qlg0r"]
[ext_resource type="Texture2D" uid="uid://c1fcwe34jbq0o" path="res://art/player-walking_0002.png" id="4_tuyoq"]
[ext_resource type="Texture2D" uid="uid://ca8axwbelgiy7" path="res://art/player-walking_0001.png" id="6_fjrip"]
[ext_resource type="AudioStream" uid="uid://h53lh3ll7xbe" path="res://audio/flap1.wav" id="7_ur7pv"]
[ext_resource type="AudioStream" uid="uid://dd7fh3hcw1tx5" path="res://audio/flap2.wav" id="8_y4r1p"]
[ext_resource type="AudioStream" uid="uid://bpsdqebjqwrai" path="res://audio/flap3.wav" id="9_d2wvv"]
[ext_resource type="AudioStream" uid="uid://3owmm2hnmi7j" path="res://audio/step1.wav" id="10_f1ej7"]
[ext_resource type="AudioStream" uid="uid://jxdnexgurgkw" path="res://audio/step2.wav" id="11_oprun"]
[ext_resource type="AudioStream" uid="uid://d0magj86g4ham" path="res://audio/step3.wav" id="12_a8ls1"]
[ext_resource type="AudioStream" uid="uid://beloux8ipvdkc" path="res://audio/step4.wav" id="13_qfm1y"]
[ext_resource type="AudioStream" uid="uid://cclicfru5mh47" path="res://audio/step5.wav" id="14_fulsm"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3vyb7"]
size = Vector2(79, 40)

[sub_resource type="SpriteFrames" id="SpriteFrames_tuyoq"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_qlg0r")
}],
"loop": true,
"name": &"airborne-falling",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_dqkch")
}],
"loop": true,
"name": &"airborne-moving",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_dqkch")
}],
"loop": true,
"name": &"airborne-still",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_qlg0r")
}, {
"duration": 1.0,
"texture": ExtResource("3_dqkch")
}],
"loop": false,
"name": &"flap",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_tuyoq")
}, {
"duration": 1.0,
"texture": ExtResource("6_fjrip")
}],
"loop": true,
"name": &"grounded-moving",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_tuyoq")
}],
"loop": true,
"name": &"grounded-still",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tuyoq"]
size = Vector2(18, 11.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fjrip"]
size = Vector2(56, 14.75)

[node name="Player" type="CharacterBody2D" groups=["player"]]
collision_layer = 2
script = ExtResource("1_3vyb7")

[node name="Camera2D" type="Camera2D" parent="."]
limit_left = 0
limit_right = 1152
limit_bottom = 648

[node name="WrappingController" type="Node2D" parent="."]
script = ExtResource("3_wrapping")

[node name="BodyCollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1.5000005, -8)
shape = SubResource("RectangleShape2D_3vyb7")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(-4.9999995, -5.9999995)
scale = Vector2(0.74, 0.74)
sprite_frames = SubResource("SpriteFrames_tuyoq")
animation = &"flap"

[node name="GroundDetector" type="RayCast2D" parent="."]
target_position = Vector2(0, 55)

[node name="JumpCooldownTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="BonkedDetector" type="Area2D" parent="."]
collision_layer = 128
collision_mask = 256

[node name="CollisionShape2D" type="CollisionShape2D" parent="BonkedDetector"]
position = Vector2(-21, -32.75)
shape = SubResource("RectangleShape2D_tuyoq")

[node name="BonkingDetector" type="Area2D" parent="."]
collision_layer = 64
collision_mask = 32

[node name="CollisionShape2D" type="CollisionShape2D" parent="BonkingDetector"]
position = Vector2(6, 11.625)
shape = SubResource("RectangleShape2D_fjrip")

[node name="FishHole" type="Marker2D" parent="." groups=["FishHole"]]
position = Vector2(-40, -32)

[node name="EvaluateLevel" type="Timer" parent="."]
autostart = true

[node name="FlapSounds" type="Node" parent="."]
unique_name_in_owner = true

[node name="Flap1" type="AudioStreamPlayer" parent="FlapSounds"]
stream = ExtResource("7_ur7pv")

[node name="Flap2" type="AudioStreamPlayer" parent="FlapSounds"]
stream = ExtResource("8_y4r1p")

[node name="Flap3" type="AudioStreamPlayer" parent="FlapSounds"]
stream = ExtResource("9_d2wvv")

[node name="WalkingSounds" type="Node" parent="."]

[node name="Step1" type="AudioStreamPlayer" parent="WalkingSounds"]
stream = ExtResource("10_f1ej7")

[node name="Step2" type="AudioStreamPlayer" parent="WalkingSounds"]
stream = ExtResource("11_oprun")

[node name="Step3" type="AudioStreamPlayer" parent="WalkingSounds"]
stream = ExtResource("12_a8ls1")

[node name="Step4" type="AudioStreamPlayer" parent="WalkingSounds"]
stream = ExtResource("13_qfm1y")

[node name="Step5" type="AudioStreamPlayer" parent="WalkingSounds"]
stream = ExtResource("14_fulsm")

[node name="WalkingSoundTimer" type="Timer" parent="."]
wait_time = 0.25
autostart = true

[connection signal="area_entered" from="BonkedDetector" to="." method="_on_bonked_detector_area_entered"]
[connection signal="area_entered" from="BonkingDetector" to="." method="_on_bonking_detector_area_entered"]
[connection signal="timeout" from="EvaluateLevel" to="." method="_on_evaluate_level_timeout"]
[connection signal="timeout" from="WalkingSoundTimer" to="." method="_on_walking_sound_timer_timeout"]
